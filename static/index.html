<html>
    <head>
        <link rel="stylesheet" type="text/css" href="/main.css" />
        <script src="/jquery.js"></script>
        <script>
         $(function(){
             let tpl = {}
             tpl.page_list_item = function(){
                 let t = $('<div class="page_list_item"> \
                              <div class="page_list_item_index"></div> \
                              <a><div class="page_list_item_name"></div></a> \
                            </div>')
                 return function(idx, name){
                     let r = t.clone()
                     r.find(".page_list_item_index").text(idx)
                     r.find(".page_list_item_name").text(name)
                     r.find("a").attr("href", "/detail/"+idx)
                     return r
                 }
             }()
             window.tpl = tpl
         });

         $(function(){
             $.ajax("/api/index")
              .done(function(data){
                  let page_list = $("#page_list")
                  page_list.empty()
                  data.forEach(function(v,i){
                      page_list.append(
                          window.tpl.page_list_item(v.id, v.name)
                      )
                  })
              })
         })
        </script>
    </head>
    <body>
        <div class="header">header</div>
        <div class="main"><div id="page_list">loading index</div></div>
        <div class="footer">footer</div>

        <script>
         //function pre_render(state){
         //    document.body.innerHTML = "hello world!";
         //}
        </script>
    </body>
</html>

